// Demonstrate the use of function chaining and "this"

fn calc_add(v) {
  this.value = this.value + v
  result = this
}

fn calc_sub(v) {
  this.value = this.value - v
  result = this
}

fn calc_value() {
  result = this.value
}

fn calc_create(v) {
  result = [
    value: v,
    add: calc_add,
    sub: calc_sub
  ]
}

calc = calc_create(0)
writeln(calc.add(20).sub(5).value) // 15

